import pandas as pd
import matplotlib.pyplot as plt

# Load CSV generated by Java
data = pd.read_csv("results.csv")

# --------- LATENCY GRAPH ---------
plt.figure()
for model in data["Model"].unique():
    subset = data[data["Model"] == model]
    plt.plot(
        subset["Accelerator"],
        subset["Latency(ms)"],
        marker="o",
        label=model
    )

plt.xlabel("Accelerator")
plt.ylabel("Latency (ms)")
plt.title("Inference Latency Comparison")
plt.legend()
plt.grid(True)
plt.savefig("latency_comparison.png")
plt.show()

# --------- ENERGY GRAPH ---------
plt.figure()
for model in data["Model"].unique():
    subset = data[data["Model"] == model]
    plt.plot(
        subset["Accelerator"],
        subset["Energy(J)"],
        marker="o",
        label=model
    )

plt.xlabel("Accelerator")
plt.ylabel("Energy (Joules)")
plt.title("Energy Consumption Comparison")
plt.legend()
plt.grid(True)
plt.savefig("energy_comparison.png")
plt.show()

# --------- MEMORY GRAPH ---------
plt.figure()
models = data["Model"].unique()
memory = [data[data["Model"] == m]["Memory(MB)"].iloc[0] for m in models]

plt.bar(models, memory)
plt.xlabel("Model")
plt.ylabel("Memory (MB)")
plt.title("Memory Usage Comparison")
plt.savefig("memory_comparison.png")
plt.show()
